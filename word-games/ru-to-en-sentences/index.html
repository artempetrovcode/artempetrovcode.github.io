<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>eng-sent</title>
  <style>
html {
  font-family: sans-serif;
}
.words {
  width: 300px;
  text-align: center;
  margin: 0 auto;
}
.word {
  margin: 3px;
}
.sentence {
  text-align: center;
}
.score {
  text-align: center;
}
.score_size_large {
  font-size: 70px;
}
  </style>
  <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
const sentences = [
  {
    en: 'we decided to become profitable at any cost',
    ru: '–º—ã —Ä–µ—à–∏–ª–∏ —Å—Ç–∞—Ç—å –ø—Ä–∏–±—ã–ª—å–Ω—ã–º–∏ –ª—é–±–æ–π —Ü–µ–Ω–æ–π',
  },
  {
    en: 'google unveiled two audio recordings',
    ru: 'google –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–ª –¥–≤–µ –∞—É–¥–∏–æ–∑–∞–ø–∏—Å–∏',
  },
  {
    en: 'Thomas Edison walked into the offices of Scientific American magazine with his latest invention',
    ru: '–¢–æ–º–∞—Å –≠–¥–∏—Å–æ–Ω –≤–æ—à–µ–ª –≤ –æ—Ñ–∏—Å –∂—É—Ä–Ω–∞–ª–∞ Scientific American —Å–æ —Å–≤–æ–∏–º –ø–æ—Å–ª–µ–¥–Ω–∏–º –∏–∑–æ–±—Ä–µ—Ç–µ–Ω–∏–µ–º',
  },
  {
    en: 'there is no real way to separate humanity from its technology',
    ru: '–Ω–µ—Ç —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–ø–æ—Å–æ–±–∞ –æ—Ç–¥–µ–ª–∏—Ç—å —á–µ–ª–æ–≤–µ—á–µ—Å—Ç–≤–æ –æ—Ç –µ–≥–æ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π',
  },
  {
    en: 'humans are remarkable for their innovation',
    ru: '–ª—é–¥–∏ –∑–∞–º–µ—á–∞—Ç–µ–ª—å–Ω—ã —Å–≤–æ–∏–º–∏ –∏–Ω–Ω–æ–≤–∞—Ü–∏—è–º–∏',
  },
  {
    en: 'are robots already self-conscious',
    ru: '—Ä–æ–±–æ—Ç—ã —É–∂–µ –æ—Å–æ–∑–Ω–∞—é—Ç —Ç–µ–±—è?',
  },
  {
    en: 'Pam tried various ways to motivate this person',
    ru: '–ü—ç–º –ø—Ä–æ–±–æ–≤–∞–ª–∞ —Ä–∞–∑–Ω—ã–µ —Å–ø–æ—Å–æ–±—ã –º–æ—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞',
  },
  {
    en: 'let\'s try to figure out the other person\'s good points',
    ru: '–¥–∞–≤–∞–π—Ç–µ –ø–æ–ø—Ä–æ–±—É–µ–º –≤—ã—è—Å–Ω–∏—Ç—å —Ö–æ—Ä–æ—à–∏–µ —Å—Ç–æ—Ä–æ–Ω—ã –¥—Ä—É–≥–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞',
  },
  {
    en: 'tomorrow you may want to persuade somebody to do something',
    ru: '–∑–∞–≤—Ç—Ä–∞ –≤—ã –º–æ–∂–µ—Ç–µ –∑–∞—Ö–æ—Ç–µ—Ç—å —É–±–µ–¥–∏—Ç—å –∫–æ–≥–æ-—Ç–æ —Å–¥–µ–ª–∞—Ç—å —á—Ç–æ-—Ç–æ',
  },
  {
    en: 'your company has been one of our good customers for fourteen years',
    ru: '–≤–∞—à–∞ –∫–æ–º–ø–∞–Ω–∏—è –±—ã–ª–∞ –æ–¥–Ω–∏–º –∏–∑ –Ω–∞—à–∏—Ö —Ö–æ—Ä–æ—à–∏—Ö –∫–ª–∏–µ–Ω—Ç–æ–≤ –≤ —Ç–µ—á–µ–Ω–∏–µ —á–µ—Ç—ã—Ä–Ω–∞–¥—Ü–∞—Ç–∏ –ª–µ—Ç',
  },
  {
    en: 'my ten years of bank experience should be of interest to a rapidly growing bank like yours',
    ru: '–º–æ–π –¥–µ—Å—è—Ç–∏–ª–µ—Ç–Ω–∏–π –æ–ø—ã—Ç —Ä–∞–±–æ—Ç—ã –≤ –±–∞–Ω–∫–µ –¥–æ–ª–∂–µ–Ω –∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞—Ç—å —Ç–∞–∫–æ–π –±—ã—Å—Ç—Ä–æ—Ä–∞—Å—Ç—É—â–∏–π –±–∞–Ω–∫, –∫–∞–∫ –≤–∞—à',
  },
  {
    en: 'i will be relocating to Phoenix in May and I am sure I can contribute to your growth and profit',
    ru: '—è –ø–µ—Ä–µ–µ–¥—É –≤ Phoenix –≤ –º–∞–µ, –∏ —è —É–≤–µ—Ä–µ–Ω, —á—Ç–æ –º–æ–≥—É –≤–Ω–µ—Å—Ç–∏ —Å–≤–æ–π –≤–∫–ª–∞–¥ –≤ –≤–∞—à —Ä–æ—Å—Ç –∏ –ø—Ä–∏–±—ã–ª—å',
  },
  {
    en: 'do you think Mrs. Anderson received any response from that letter',
    ru: '–∫–∞–∫ –≤—ã –¥—É–º–∞–µ—Ç–µ, –º–∏—Å—Å–∏—Å –ê–Ω–¥–µ—Ä—Å–æ–Ω –ø–æ–ª—É—á–∏–ª–∞ –æ—Ç–≤–µ—Ç –Ω–∞ —ç—Ç–æ –ø–∏—Å—å–º–æ?',
  },
  {
    en: 'let the other person feel that the idea is his or hers',
    ru: '–ø—É—Å—Ç—å –¥—Ä—É–≥–æ–π —á–µ–ª–æ–≤–µ–∫ –ø–æ—á—É–≤—Å—Ç–≤—É–µ—Ç, —á—Ç–æ –∏–¥–µ—è –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç –µ–º—É –∏–ª–∏ –µ–π',
  },
  {
    en: 'talk about your own mistakes before criticizing the other person',
    ru: '—Ä–∞—Å—Å–∫–∞–∂–∏—Ç–µ –æ —Å–≤–æ–∏—Ö –æ—à–∏–±–∫–∞—Ö, –ø—Ä–µ–∂–¥–µ —á–µ–º –∫—Ä–∏—Ç–∏–∫–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞',
  },
  {
    en: 'when dealing with people, let us remember we are not dealing with creatures of logic',
    ru: '–∏–º–µ—è –¥–µ–ª–æ —Å –ª—é–¥—å–º–∏, –¥–∞–≤–∞–π—Ç–µ –ø–æ–º–Ω–∏—Ç—å, —á—Ç–æ –º—ã –Ω–µ –∏–º–µ–µ–º –¥–µ–ª–æ —Å —Å—É—â–µ—Å—Ç–≤–∞–º–∏ –ª–æ–≥–∏—á–Ω—ã–º–∏',
  },
  {
    en: 'the only way on earth to influence other people is to talk about what they want and show them how to get it',
    ru: '–µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –Ω–∞ –∑–µ–º–ª–µ –ø–æ–≤–ª–∏—è—Ç—å –Ω–∞ –¥—Ä—É–≥–∏—Ö –ª—é–¥–µ–π - —ç—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç—å –æ —Ç–æ–º, —á–µ–≥–æ –æ–Ω–∏ —Ö–æ—Ç—è—Ç, –∏ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∏–º, –∫–∞–∫ —ç—Ç–æ–≥–æ –¥–æ–±–∏—Ç—å—Å—è.',
  },
  {
    en: 'adversity reveals genius, prosperity conceals it',
    ru: '–Ω–µ—Å—á–∞—Å—Ç—å–µ —Ä–∞—Å–∫—Ä—ã–≤–∞–µ—Ç –≥–µ–Ω–∏–∞–ª—å–Ω–æ—Å—Ç—å, –ø—Ä–æ—Ü–≤–µ—Ç–∞–Ω–∏–µ —Å–∫—Ä—ã–≤–∞–µ—Ç',
  },
  {
    en: 'I would rather be a superb meteor, every atom of me in magnificent glow, than a sleepy and permanent planet',
    ru: '–Ø –ø—Ä–µ–¥–ø–æ—á–µ–ª –±—ã –±—ã—Ç—å –ø—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω—ã–º –º–µ—Ç–µ–æ—Ä–æ–º, –∫–∞–∂–¥—ã–π –∞—Ç–æ–º –º–µ–Ω—è –≤ –≤–µ–ª–∏–∫–æ–ª–µ–ø–Ω–æ–º —Å–∏—è–Ω–∏–∏, —á–µ–º —Å–æ–Ω–Ω–æ–π –∏ –ø–æ—Å—Ç–æ—è–Ω–Ω–æ–π –ø–ª–∞–Ω–µ—Ç–æ–π',
  },
  {
    en: 'don‚Äôt judge each day by the harvest you reap but by the seeds that you plant',
    ru: '–Ω–µ —Å—É–¥–∏ –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –ø–æ —É—Ä–æ–∂–∞—é, –∫–æ—Ç–æ—Ä—ã–π —Ç—ã –ø–æ–∂–∏–Ω–∞–µ—à—å, –Ω–æ –ø–æ —Å–µ–º–µ–Ω–∞–º, –∫–æ—Ç–æ—Ä—ã–µ —Ç—ã —Å–∞–∂–∞–µ—à—å',
  },
  {
    en: 'the secret of getting ahead is getting started',
    ru: '—Å–µ–∫—Ä–µ—Ç —Ç–æ–≥–æ —á—Ç–æ–±—ã –ø—Ä–µ—É—Å–ø–µ–≤–∞—Ç—å –≤ —Ç–æ–º —á—Ç–æ–±—ã –Ω–∞—á–∏–Ω–∞—Ç—å (Mark Twain)',
  },
  {
    en: 'be yourself. everyone else is already taken',
    ru: '–±—É–¥—å —Å–æ–±–æ–π. –≤—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ —É–∂–µ –∑–∞–Ω—è—Ç—ã (Oscar Wilde)',
  },
  {
    en: 'always forgive your enemies. nothing annoys them so much',
    ru: '–≤—Å–µ–≥–¥–∞ –ø—Ä–æ—â–∞–π —Å–≤–æ–∏—Ö –≤—Ä–∞–≥–æ–≤. –Ω–∏—á—Ç–æ –∏—Ö —Ç–∞–∫ –Ω–µ —Ä–∞–∑–¥—Ä–∞–∂–∞–µ—Ç',
  },
];

class Game extends React.Component {
  constructor(props) {
    super(props);
    this.state = {
      sentences: shuffle(this.props.sentences),
      currentSentenceIndex: 0,
      score: 3,
    }
    this.handleNext = this.handleNext.bind(this);
    this.handleMiss = this.handleMiss.bind(this);
  }
  handleNext() {
    this.setState({
      currentSentenceIndex: this.state.currentSentenceIndex + 1,
      score: this.state.score + 1,
    });
  }
  handleMiss() {
    this.setState({
      score: this.state.score - 1,
    });
  }
  render() {
    const {sentences, currentSentenceIndex, score} = this.state;
    
    if (currentSentenceIndex === sentences.length) {
      return <Score score={score} large={true} />
    }

    return (
      <div>
        <Score score={score} large={false} />
        <Puzzle key={currentSentenceIndex} 
          sentence={sentences[currentSentenceIndex]} 
          onNext={this.handleNext}
          onMiss={this.handleMiss} />
      </div>
    );
  }
}

const Score = ({score, large}) => {
  const className = large ? 'score score_size_large' : 'score';
  return (
    <div className={className}>
      {['ü•ï', 'üçä', 'üçå', 'üçé', 'üçè', 'üçë', 'üçì', 'üçá', 'üçâ', 'üçã', 'üçê', 'üçí', 'üçà', 'üçç', 'ü•ù','üçß'].slice(0, Math.max(1, score)).join('')}
    </div>
  );
}

class Puzzle extends React.Component {
  constructor(props) {
    super(props);
    const {en} = this.props.sentence;
    const expectedWords = en.split(' '); //.slice(0, 3);
    const availableWords = shuffle(expectedWords);

    this.state = {
      nextWordIndex: 0,
      expectedWords,
      availableWords
    }
    this.handleNextClick = this.handleNextClick.bind(this);
  }
  handleWordClick(word) {
    if (this.state.expectedWords[this.state.nextWordIndex] === word) {
      this.setState({ nextWordIndex: this.state.nextWordIndex + 1 });
    } else {
      this.props.onMiss();
    }
  }
  handleNextClick() {
    const {nextWordIndex, expectedWords} = this.state;
    if (expectedWords.length === nextWordIndex) {
      this.props.onNext();
    }
  }
  render() {
    const {en, ru} = this.props.sentence;
    const {nextWordIndex, expectedWords, availableWords} = this.state;
    const usedWords = expectedWords.slice(0, nextWordIndex);
    const usedWordsToHide = usedWords.slice();

    return (
      <div>
        <p className="sentence" title={en}>{ru}</p>
        <div className="words">
        {availableWords.map(
          (w, i) => {
            const index = usedWordsToHide.indexOf(w);            
            const style = index === -1 ? {} : { visibility: 'hidden' };
            if (index !== -1) {
              usedWordsToHide.splice(index, 1);
            }            
            const onClick = this.handleWordClick.bind(this, w);
            return <button className="word" key={i} onClick={onClick} style={style}>{w}</button>;
          }
        )}  
        </div>      
        <p className="sentence">
          &nbsp;{usedWords.map((w, i) => <span key={i}>{w} </span>)}
          {expectedWords.length === nextWordIndex && <button onClick={this.handleNextClick}>next</button>}
        </p>
      </div>
    );
  }
}

ReactDOM.render(
  <Game sentences={sentences} />,
  document.getElementById('root')
);

/**
 * Shuffles array in place. ES6 version
 * @param {Array} a items An array containing the items.
 */
 function shuffle(arr) {
    const a = arr.slice();
    for (let i = a.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [a[i], a[j]] = [a[j], a[i]];
    }
    return a;
}

  </script>
</body>
</html>